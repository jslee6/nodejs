<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="/main.css" rel="stylesheet">
</head>

<body class="grey-bg">
    <%- include('nav.ejs') %>     
    
    <!-- html ì²˜ëŸ¼ ë‚˜ì˜¤ë ¤ë©´ - ë¡œí‘œê¸° = ëŠ” ë¬¸ìë‚˜ ìˆ«ìì²˜ëŸ¼ ë‚˜ì˜´ -->
    

    <div class="white-bg">
      <% for (let i = 0; i < ê¸€ëª©ë¡.length; i++){ %>
        <div class="list-box">
          <h4>
            <a href="/detail/<%= ê¸€ëª©ë¡[i]._id %>">
              <%= ê¸€ëª©ë¡[i].title %>
            </a>
            <a href="/edit/<%= ê¸€ëª©ë¡[i]._id %>">âœï¸</a>
            <span class="delete" data-id="<%= ê¸€ëª©ë¡[i]._id %>">ğŸ—‘ï¸</span>  
            <!-- data-id="<%= ê¸€ëª©ë¡[i]._id %> ëŠ” ì‚­ì œ ë²„íŠ¼ì„ ë°ì´íƒ€ idì— ë„£ìŒ 47ë²ˆì§¸ë¡œ ì—°ê²°-->
          </h4>
          <p><%= ê¸€ëª©ë¡[i].content %></p>
        </div>
      <% } %>
    </div>

    <!-- <script>
      document.querySelectorAll('.delete')[0].addEventListener('click', function(){
        fetch('/abc', {
          method : 'POST',
          headers : { 
            'Content-Type' : 'application/json' 
          },
          body : JSON.stringify({a : 1})
        })
      })
    </script> AJAX 1 ë‚´ì—­  -->

<script>

  document.querySelectorAll('.delete')[0].addEventListener('click', function(e){
    fetch('/delete?docid=' + e.target.dataset.id, {
    method : 'DELETE'
  })
  
  .then((r)=>r.text())
    .then((r)=>console.log(r))
})     //  ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ?  ajx ? ìœ„ì— +ê¸°í˜¸ëŠ” ë¬¸ì ë‘ê°œ í•©ì³ì£¼ì„¸ìš” ,  e.target.dataset.id== ë¬¸ìë¼ì„œ +ë¡œ í•©ì¹˜ê³  ìœ„ì— data-id ì—ì„œ ë°›ì€ ë°ì´íƒ€ì…‹ì— idë¥¼ ë„£ìŒ


// document.querySelectorAll('.delete')[1].addEventListener('click', function(e){
//     fetch('/delete?docid=' + e.target.dataset.id, {
//     method : 'DELETE'
//   })
// })  

// document.querySelectorAll('.delete')[2].addEventListener('click', function(e){
//     fetch('/delete?docid=' + e.target.dataset.id, {
//     method : 'DELETE'
//   })
// })  

</script> 



   <!-- í¼íƒœê·¸ ë§ê³  ajax ë¥¼ ì‚¬ìš©í• ìˆ˜ì‡ìŒ. ì´ê²Œ ajax. get , post ,delete ,put ë“± ì¤‘ìš”!!! /abc í•˜ì—¬ì„œ server.js ì—ì„œ-->
  

  </body>
</html>